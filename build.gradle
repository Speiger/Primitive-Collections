plugins {
    id 'java-library'
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

apply plugin: 'java'
apply plugin: 'eclipse'

repositories {
    jcenter()
    flatDir {
        dirs '/libs'
    }
}

sourceCompatibility = targetCompatibility = compileJava.sourceCompatibility = compileJava.targetCompatibility = '1.8'

eclipse {
	classpath {
		downloadJavadoc = true
		downloadSources = true
		file {
			whenMerged {
				//Enforce a custom container and allowing access to the sun.misc package which is nessesary for EnumMaps
				entries.find{ it.kind == 'con' && it.path.startsWith('org.eclipse.jdt')}.path = 'org.eclipse.jdt.launching.JRE_CONTAINER';
			}
		}
	}
}

task generateSource(type: JavaExec) {
	group = 'internal'
	description = 'Builds the sourcecode'
    classpath = sourceSets.main.runtimeClasspath
    main = 'speiger.src.builder.example.TestBuilder'
}

dependencies {
	compile 'SimpleCodeGenerator:Simple Code Generator:1.0.1'
    testImplementation 'junit:junit:4.12'
}

test {
    useJUnit()
}